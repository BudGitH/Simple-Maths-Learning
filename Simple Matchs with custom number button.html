<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simple Math Fun</title>
    <style>
        body {
            font-family: system-ui, -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            height: 100vh;
            color: #333;
        }
        .exercise {
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 20px;
            padding: 20px;
            background-color: rgba(255, 255, 255, 0.8);
            border-radius: 15px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        .emoji-container {
            display: flex;
            flex-direction: column;
            align-items: center;
            justify-content: center;
            background-color: rgba(240, 240, 240, 0.9);
            padding: 20px;
            border-radius: 10px;
            margin: 0 10px;
        }
        .emoji {
            font-size: 50px;
            margin: 5px;
        }
        .input-box {
            width: 60px;
            height: 60px;
            font-size: 24px;
            text-align: center;
            margin: 10px 0;
            border-radius: 10px;
            box-shadow: inset 0 0 5px rgba(0, 0, 0, 0.1);
            border: 2px solid #ddd;
        }
        #validate-button, #regenerate-button {
            padding: 15px 30px;
            font-size: 18px;
            cursor: pointer;
            margin-top: 20px;
            background-color: #008CBA;
            color: white;
            border: none;
            border-radius: 10px;
            transition: box-shadow 0.2s, filter 0.2s;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
        }
        #validate-button {
            background-color: #4CAF50;
        }
        #validate-button:hover, #regenerate-button:hover {
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            filter: contrast(1.2);
            border: 2px solid #008CBA;
        }
        #validate-button:hover {
            border: 2px solid #4CAF50;
        }
        #modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
        }
        #modal-content {
            background: white;
            padding: 50px;
            border-radius: 20px;
            text-align: center;
            position: relative;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
            width: 50%;
            max-width: 600px;
        }
        #toast-message {
            visibility: hidden;
            min-width: 250px;
            background-color: #4CAF50;
            color: white;
            text-align: center;
            border-radius: 5px;
            padding: 16px;
            position: fixed;
            z-index: 1;
            left: 50%;
            bottom: 30px;
            font-size: 17px;
            transform: translateX(-50%);
        }
        #toast-message.show {
            visibility: visible;
            animation: fadein 0.5s, fadeout 0.5s 2.5s;
        }
        @keyframes fadein {
            from {bottom: 0; opacity: 0;}
            to {bottom: 30px; opacity: 1;}
        }
        @keyframes fadeout {
            from {bottom: 30px; opacity: 1;}
            to {bottom: 0; opacity: 0;}
        }
        #number-pad-modal {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.5);
            display: none;
            align-items: center;
            justify-content: center;
        }
        #number-pad-content {
            background: white;
            padding: 30px;
            border-radius: 20px;
            text-align: center;
            position: relative;
            box-shadow: 0 8px 16px rgba(0, 0, 0, 0.3);
        }
        .number-pad {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            width: 200px;
            margin-top: 20px;
        }
        .number-button {
            width: 60px;
            height: 60px;
            font-size: 24px;
            margin: 5px;
            background-color: #f0f0f0;
            border: none;
            border-radius: 10px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }
        .number-button:hover {
            background-color: #ddd;
        }
        #close-number-pad-button {
            padding: 10px 20px;
            font-size: 16px;
            margin-top: 20px;
            background-color: #008CBA;
            color: white;
            border: none;
            border-radius: 10px;
            cursor: pointer;
        }
        #close-number-pad-button:hover {
            background-color: #005f73;
        }
    </style>
</head>
<body>
    <h1>Simple Math Fun!</h1>
    <div class="exercise" id="exercise-container">
        <div class="emoji-container">
            <div id="objects-container">
                <span class="emoji">üçç</span>
                <span class="emoji">üçç</span>
                <span class="emoji">üçç</span>
            </div>
            <button id="count1" class="input-box" onclick="openNumberPad(event)">?</button>
        </div>
        <span class="operator">+</span>
        <div class="emoji-container">
            <div id="objects-container-2">
                <span class="emoji">üçç</span>
            </div>
            <button id="count2" class="input-box" onclick="openNumberPad(event)">?</button>
        </div>
        <span class="operator">=</span>
        <div class="emoji-container">
            <span class="emoji">‚ùì</span>
            <button id="user-answer" class="input-box" onclick="openNumberPad(event)">?</button>
        </div>
    </div>
    <div id="number-pad-modal" class="modal">
        <div id="number-pad-content">
            <div class="number-pad">
                <button class="number-button" onclick="handleNumberClick(1)">1</button>
                <button class="number-button" onclick="handleNumberClick(2)">2</button>
                <button class="number-button" onclick="handleNumberClick(3)">3</button>
                <button class="number-button" onclick="handleNumberClick(4)">4</button>
                <button class="number-button" onclick="handleNumberClick(5)">5</button>
                <button class="number-button" onclick="handleNumberClick(6)">6</button>
                <button class="number-button" onclick="handleNumberClick(7)">7</button>
                <button class="number-button" onclick="handleNumberClick(8)">8</button>
                <button class="number-button" onclick="handleNumberClick(9)">9</button>
                <button class="number-button" onclick="handleNumberClick(10)">10</button>
            </div>
            <button id="close-number-pad-button" onclick="closeNumberPad()">Close</button>
        </div>
    </div>
    <button id="validate-button">Check my answer</button>
    <button id="regenerate-button">Show me new numbers</button>
    <div id="modal">
        <div id="modal-content">
            <h2 id="modal-title"></h2>
            <p id="modal-message"></p>
            <button id="close-modal-button" onclick="closeModal()">Close</button>
        </div>
    </div>
    <div id="toast-message">New numbers have been generated!</div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            regenerateEquation();
        });
        const validateButton = document.getElementById('validate-button');
        const regenerateButton = document.getElementById('regenerate-button');
        const modal = document.getElementById('modal');
        const modalMessage = document.getElementById('modal-message');
        const modalTitle = document.getElementById('modal-title');
        const userAnswer = document.getElementById('user-answer');
        const count1 = document.getElementById('count1');
        const count2 = document.getElementById('count2');
        const toastMessage = document.getElementById('toast-message');
        let activeInput = null;

        validateButton.addEventListener('click', validateAnswer);
        regenerateButton.addEventListener('click', regenerateEquation);

        function validateAnswer() {
            const correctCount1 = document.getElementById('objects-container').children.length;
            const correctCount2 = document.getElementById('objects-container-2').children.length;
            const correctAnswer = correctCount1 + correctCount2;

            const userCount1 = parseInt(count1.innerText);
            const userCount2 = parseInt(count2.innerText);
            const userAnswerValue = parseInt(userAnswer.innerText);

            let incorrectFields = [];

            if (userCount1 !== correctCount1) {
                incorrectFields.push(count1);
            }
            if (userCount2 !== correctCount2) {
                incorrectFields.push(count2);
            }
            if (userAnswerValue !== correctAnswer) {
                incorrectFields.push(userAnswer);
            }

            if (incorrectFields.length === 0) {
                showModal('Great job well done!');
                regenerateEquation();
                showToast();
            } else {
                incorrectFields.forEach(field => field.style.borderColor = 'red');
                showModal('Oops lets try again!');
            }
        }

        function handleNumberClick(number) {
            if (activeInput) {
                activeInput.innerText = number;
                activeInput.style.borderColor = 'blue';
                closeNumberPad();
            }
        }

        function openNumberPad(event) {
            activeInput = event.target;
            document.getElementById('number-pad-modal').style.display = 'flex';
        }

        function closeNumberPad() {
            document.getElementById('number-pad-modal').style.display = 'none';
            activeInput = null;
        }

        function showModal(message) {
            const gifUrl = message.includes('Great job') ? 'https://i.giphy.com/D2hncA3u88gmeCFeoh.webp' : 'https://media0.giphy.com/media/v1.Y2lkPTc5MGI3NjExdHdyejFxN2ppYWR4MmJ5amczb3Bqc3VmNWZhZG41aGx1OHk5ejAxcyZlcD12MV9pbnRlcm5hbF9naWZfYnlfaWQmY3Q9Zw/dry8S89ncvPMrmgwvr/giphy.webp';
            modalMessage.innerHTML = `<img src="${gifUrl}" alt="Reaction GIF" style="width: 300px; height: auto; margin-bottom: 20px; display: block; margin-left: auto; margin-right: auto;">`;
            modalTitle.textContent = message;
            modal.style.display = 'flex';
        }

        function closeModal() {
            modal.style.display = 'none';
        }

        function regenerateEquation() {
            // List of fruit emojis to randomize
            const fruitEmojis = ['üçé', 'üçå', 'üçá', 'üçä', 'üçâ', 'üçì', 'üçí', 'üçç', 'üçê', 'üçã'];

            // Generating a random number of fruits (maximum of 5 for each group, suitable for 5-year-olds)
            const numFruits1 = Math.floor(Math.random() * 5) + 1;
            const numFruits2 = Math.floor(Math.random() * 5) + 1;

            // Selecting random fruit
            const fruit = fruitEmojis[Math.floor(Math.random() * fruitEmojis.length)];

            const objectsContainer = document.getElementById('objects-container');
            const objectsContainer2 = document.getElementById('objects-container-2');

            objectsContainer.innerHTML = '';
            for (let i = 0; i < numFruits1; i++) {
                objectsContainer.innerHTML += `<span class="emoji">${fruit}</span>`;
            }

            objectsContainer2.innerHTML = '';
            for (let i = 0; i < numFruits2; i++) {
                objectsContainer2.innerHTML += `<span class="emoji">${fruit}</span>`;
            }

            count1.innerText = '?';
            count2.innerText = '?';
            userAnswer.innerText = '?';
            count1.style.borderColor = '';
            count2.style.borderColor = '';
            userAnswer.style.borderColor = '';

            showToast();
        }

        function showToast() {
            toastMessage.className = 'show';
            setTimeout(() => {
                toastMessage.className = toastMessage.className.replace('show', '');
            }, 3000);
        }
    </script>
</body>
</html>
